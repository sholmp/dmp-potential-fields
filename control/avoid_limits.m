function qdot_avoid_limits = avoid_limits(q)
    %For panda:  

    % 1: [-2.8973 2.8973]
    % 2: [-1.7628 1.7628]
    % 3: [-2.8973 2.8973]
    % 4: [-3.0718 -0.0698]
    % 5: [-2.8973 2.8973]
    % 6: [-0.0175 3.7525]
    % 7: [-2.8973 2.8973]
    
    
    
    q_min = [-2.8973, -1.7628, -2.8973, -3.0718, -2.8973, -0.0175, -2.8973]';
    q_max = [2.8973, 1.7628, 2.8973, -0.0698, 2.8973, 3.7525, 2.8973]';
    a = 0.5 * (q_min + q_max);
      
    g = 1./((3*(a-q_max).^2)) .* (q - a); %Gradient of H
    
    qdot_avoid_limits = -g;
%     qdot_avoid_limits = -0.5*[q - a];
    
    
end